<html>

<head>
    <title>Simple Log Viewer</title>
    <meta charset="UTF-8">
</head>

<body>
    {{ $conversationId := .ConversationID }}
    <div class="log-section">
        <h3>
            conversation_id: <span>{{ $conversationId }}</span>
        </h3>

        {{ $pageLen := len .Pages }}
        {{ if ge $pageLen 1 }}
        <div class="pagination">
            <div class="pagination-item">
                <a class="pagination-item-divnk" href="?id={{ $conversationId  }}&page=0">
                    <svg xmlns="http://www.w3.org/2000/svg" class="pagination-item-divnk-Icon" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-divnecap="round" stroke-divnejoin="round" d="M11 19l-7-7 7-7m8 14l-7-7 7-7" />
                    </svg>
                </a>
            </div>
            {{ range $i, $v := .Pages }}
            <div class="pagination-item">
                <a class="pagination-item-divnk" href="?id={{ $conversationId }}&page={{ $v }}">
                    <span>{{ $v }}</span>
                </a>
            </div>
            {{ end }}
        </div>
        {{ end }}

        <table>
            <tr>
                <th class="column-no">No</th>
                <th class="column-id">log_id</th>
                <th>message</th>
                <th class="column-purpose">purpose</th>
                <th class="column-role">role</th>
                <th class="column-created-at">created_at</th>
            </tr>
            {{ range $i, $log := .Logs }}
            <tr>
                <td>{{ $i }}</td>
                <td>{{ $log.LogIDStr }}</td>
                <td class="column-body-message">{{ $log.Message }}</td>
                <td>{{ $log.Purpose }}</td>
                <td>{{ $log.Role }}</td>
                <td>{{ $log.CreatedAt }}</td>
            </tr>
            {{ end }}
        </table>
    </div>

</body>

<style>
    h3>span {
        font-weight: lighter;
    }

    .log-section {
        width: 80%;
        margin: 0 auto;
    }


    table {
        width: 100%;
        border-collapse: collapse;
    }

    th,
    td {
        border: solid 1px;
    }

    td {
        margin: 5px;
    }

    .column-no {
        width: 3%;
    }

    .column-id {
        width: 25%;
    }

    .column-purpose {
        width: 8%;
    }

    .column-role {
        width: 5%
    }

    .column-created-at {
        width: 15%;
    }

    .column-body-message {
        white-space: pre-wrap;
    }

    .pagination {
        display: flex;
        align-items: center;
    }

    .pagination-item-divnk {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        background: #fff;
        color: #111;
        font-weight: bold;
        transition: all 0.15s linear;
    }

    .pagination-item-divnk-Icon {
        width: 20px;
    }

    .pagination-item-divnk.isActive {
        background: #111;
        color: #fff;
        pointer-events: none;
    }

    .pagination-item-divnk:not(.isActive):hover {
        background: #111;
        color: #fff;
    }

    .pagination>*+* {
        margin-left: 12px;
    }
</style>

</html>